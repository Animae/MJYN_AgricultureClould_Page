webpackJsonp([7],{"./app/containers/DevicePage/actions.js":function(e,n,t){"use strict";function r(e){return{type:p.a,payload:e}}function a(e){return{type:p.b,payload:e}}function o(e){return{type:p.c,payload:e}}function i(e){return{type:p.d,payload:e}}function c(e){return{type:p.e,payload:e}}function s(e){return{type:p.f,payload:e}}function u(e){return{type:p.g,payload:e}}var p=t("./app/containers/DevicePage/constants.js");n.a=r,n.e=a,n.f=o,n.g=i,n.b=c,n.c=s,n.d=u},"./app/containers/DevicePage/constants.js":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"c",function(){return o}),t.d(n,"d",function(){return i}),t.d(n,"e",function(){return c}),t.d(n,"f",function(){return s}),t.d(n,"g",function(){return u});var r="app/DevicePage/LOAD_PAGE",a="app/DevicePage/SET_PAGE_ID",o="app/DevicePage/SET_PAGE_SETTINGS",i="app/DevicePage/SET_DEVICES",c="app/DevicePage/SET_FILTER_CATEGORY",s="app/DevicePage/SET_DEVICE_EDITING",u="app/DevicePage/SET_DEVICE_DELETING"},"./app/containers/DevicePage/sagas.js":function(e,n,t){"use strict";function r(e){var n,r,a,i,d,f;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,t.i(o.select)(t.i(u.g)());case 2:if(n=m.sent,r=11,a=e.payload,a==n){m.next=33;break}return m.next=8,t.i(o.put)(t.i(p.e)(a));case 8:return m.prev=8,i=l.serverHost+"/api/device/list",m.next=12,t.i(o.call)(c.a,i,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({farmId:r})});case 12:if(d=m.sent,!d.data){m.next=25;break}return f=t.i(g.a)(d.data)[a],m.next=17,t.i(o.put)(t.i(p.e)(a));case 17:return m.next=19,t.i(o.put)(t.i(p.f)(f.settings));case 19:return m.next=21,t.i(o.put)(t.i(p.g)(f.devices));case 21:return m.next=23,t.i(o.call)(s.toast.success,"设备信息加载成功");case 23:m.next=27;break;case 25:return m.next=27,t.i(o.call)(s.toast.error,"设备信息加载失败, 请稍后刷新页面重试");case 27:m.next=33;break;case 29:return m.prev=29,m.t0=m.catch(8),m.next=33,t.i(o.call)(s.toast.error,"设备信息加载失败, 请稍后刷新页面重试...");case 33:case"end":return m.stop()}},m[0],this,[[8,29]])}function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.i(o.takeEvery)(i.a,r);case 2:case"end":return e.stop()}},m[1],this)}Object.defineProperty(n,"__esModule",{value:!0});var o=t("./node_modules/redux-saga/effects.js"),i=(t.n(o),t("./app/containers/DevicePage/constants.js")),c=t("./app/utils/request.js"),s=t("./node_modules/react-toastify/lib/index.js"),u=(t.n(s),t("./app/containers/DevicePage/selectors.js")),p=(t("./app/containers/FarmPage/selectors.js"),t("./app/containers/DevicePage/actions.js")),l=t("./config/index.js"),g=(t.n(l),t("./app/containers/DevicePage/util/api-transform.js"));n.loadPage=r,n.loadPageSaga=a;var m=[r,a].map(regeneratorRuntime.mark);n.default=[a]},"./app/containers/DevicePage/selectors.js":function(e,n,t){"use strict";var r=t("./node_modules/reselect/es/index.js");t.d(n,"g",function(){return o}),t.d(n,"b",function(){return i}),t.d(n,"a",function(){return c}),t.d(n,"c",function(){return s}),t.d(n,"d",function(){return u}),t.d(n,"e",function(){return p}),t.d(n,"f",function(){return l});var a=function(){return function(e){return e.get("devicePage")}},o=function(){return t.i(r.a)(a(),function(e){return e.get("pageId")})},i=function(){return t.i(r.a)(a(),function(e){return e.get("pageSettings").toJS()})},c=function(){return t.i(r.a)(a(),function(e){var n=e.get("filterCategory");return e.get("devices").filter(function(e){return"列表模式"===n||e.get("category")===n}).toJS()})},s=function(){return t.i(r.a)(a(),function(e){return e.get("filterCategory")})},u=function(){return t.i(r.a)(a(),function(e){return e.get("deviceIsEditing")})},p=function(){return t.i(r.a)(a(),function(e){return e.get("deviceEditing").toJS()})},l=function(){return t.i(r.a)(a(),function(e){return e.get("deviceDeleteing").toJS()})}},"./app/containers/DevicePage/util/api-transform.js":function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}t.d(n,"a",function(){return u});var a={"网关设备":"18","土壤湿度传感器":"17","土壤温度传感器":"48","土壤PH传感器":"51","土壤EC传感器":"50","空气湿度传感器":"46","光照传感器":"73","空气CO2传感器":"69","双态开关控制器":"71","双态脉冲控制器":"66","三态开关控制器":"67","大电流设备控制器":"65","智能传感":"8","智能控制":"6","监控云台":"13","水肥一体机":"17","土壤墒情站":"5","辅助设备":"72","气象站":"15","虫情监控":"49","列表模式":"68","设备工况":"75"},o={"网关设备":"#F2A523","土壤湿度传感器":"#F2A523","土壤温度传感器":"#F2A523","土壤PH传感器":"#F2A523","土壤EC传感器":"#F2A523","空气湿度传感器":"#F2A523","光照传感器":"#F2A523","空气CO2传感器":"#F2A523","双态开关控制器":"#27D580","双态脉冲控制器":"#27D580","三态开关控制器":"#27D580","大电流设备控制器":"#27D580","智能传感":"#F2A523","智能控制":"#27D580","监控云台":"#0D3F7B","水肥一体机":"#0D3F7B","土壤墒情站":"#0D3F7B","辅助设备":"#0D3F7B","气象站":"#0D3F7B","虫情监控":"#0D3F7B","列表模式":"#0D3F7B","设备工况":"#0D3F7B"},i={1:{serverType:"GATEWAY",typeName:"网关设备"},16:{serverType:"MONITOR",typeName:"空气湿度传感器"},17:{serverType:"MONITOR",typeName:"光照强度传感器"},19:{serverType:"MONITOR",typeName:"空气CO2浓度传感器"},21:{serverType:"MONITOR",typeName:"土壤温度传感器"},22:{serverType:"MONITOR",typeName:"土壤湿度传感器"},128:{serverType:"CONTROL",typeName:"单路脉冲继电控制器"},129:{serverType:"CONTROL",typeName:"双路开关继电控制器"},130:{serverType:"CONTROL",typeName:"单路三态继电控制器"},132:{serverType:"CONTROL",typeName:"四路脉冲继电控制器"},133:{serverType:"CONTROL",typeName:"八路开关继电控制器"},134:{serverType:"CONTROL",typeName:"四路三态继电控制器"},135:{serverType:"CONTROL",typeName:"四路三态H桥控制器"}},c={GATEWAY:{name:"gateway",page:0},MONITOR:{name:"sensor",page:1},CONTROL:{name:"controller",page:2}},s={0:{settings:{pageTitle:"网关设备",pageIcon:a["网关设备"],deviceType:"gateway",categories:[]},devices:[]},1:{settings:{pageTitle:"智能传感",pageIcon:a["智能传感"],deviceType:"sensor",categories:[{name:"土壤湿度传感器",iconName:a["土壤湿度传感器"],iconColor:"#F2A523"},{name:"土壤温度传感器",iconName:a["土壤温度传感器"],iconColor:"#F2A523"},{name:"土壤PH传感器",iconName:a["土壤PH传感器"],iconColor:"#F2A523"},{name:"土壤EC传感器",iconName:a["土壤EC传感器"],iconColor:"#F2A523"},{name:"空气湿度传感器",iconName:a["空气湿度传感器"],iconColor:"#F2A523"},{name:"光照传感器",iconName:a["光照传感器"],iconColor:"#F2A523"},{name:"空气CO2传感器",iconName:a["空气CO2传感器"],iconColor:"#F2A523"},{name:"列表模式",iconName:a["列表模式"],iconColor:"#F2A523"}]},devices:[]},2:{settings:{pageTitle:"智能控制",pageIcon:a["智能控制"],deviceType:"controller",categories:[{name:"双态开关控制器",iconName:a["双态开关控制器"],iconColor:"#27D580"},{name:"双态脉冲控制器",iconName:a["双态脉冲控制器"],iconColor:"#27D580"},{name:"三态开关控制器",iconName:a["三态开关控制器"],iconColor:"#27D580"},{name:"大电流设备控制器",iconName:a["大电流设备控制器"],iconColor:"#27D580"},{name:"列表模式",iconName:a["列表模式"],iconColor:"#27D580"}]},devices:[]},3:{settings:{pageTitle:"设备工况",pageIcon:a["设备工况"],deviceType:"monitor",categories:[{name:"智能传感",iconName:a["智能传感"],iconColor:"#F2A523"},{name:"智能控制",iconName:a["智能控制"],iconColor:"#27D580"},{name:"监控云台",iconName:a["监控云台"],iconColor:"#0D3F7B"},{name:"水肥一体机",iconName:a["水肥一体机"],iconColor:"#0D3F7B"},{name:"土壤墒情站",iconName:a["土壤墒情站"],iconColor:"#0D3F7B"},{name:"辅助设备",iconName:a["辅助设备"],iconColor:"#0D3F7B"},{name:"气象站",iconName:a["气象站"],iconColor:"#0D3F7B"},{name:"虫情监控",iconName:a["虫情监控"],iconColor:"#0D3F7B"},{name:"列表模式",iconName:a["列表模式"],iconColor:"#0D3F7B"}]},devices:[]}},u=function(e){var n=Object.assign({},s);return e.forEach(function(e){var t=e.type,s=i[t].typeName,u=i[t].serverType,p=c[u].page;n[p].devices.push({iconName:a[s],batteryPercent:e.battery,boarderColor:o[s],category:s,deviceId:e.id,deviceName:e.name,signalLevel:e.signal,location:{lat:e.pointVO.latitude,lng:e.pointVO.longitude},deviceType:s,sensorData:"sensor"===s?e.states.map(function(e){return e.name+" "+e.value+" "+e.unit}):[],controllerData:"controller"===s?[].concat(r(Array(3).keys())).map(function(e){return{id:state.key,name:cat.substring(0,5)+" "+randomInt(0,100),allowedValue:state.allowedValue,value:state.value}}):[]})}),n}},"./app/containers/FarmPage/selectors.js":function(e,n,t){"use strict";var r=t("./node_modules/reselect/es/index.js");t.d(n,"a",function(){return o});var a=function(){return function(e){return e.get("farmPage")}},o=function(){return t.i(r.a)(a(),function(e){var n=e.get("activeFarmId"),t=e.get("farms").get(n)||e.get("farms").get("NA");return t.toJS()})}}});