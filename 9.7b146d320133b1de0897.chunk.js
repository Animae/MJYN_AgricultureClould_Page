webpackJsonp([9],{"./app/containers/DevicePage/actions.js":function(e,n,t){"use strict";function r(e){return{type:p.a,payload:e}}function a(e){return{type:p.b,payload:e}}function i(e){return{type:p.c,payload:e}}function o(e){return{type:p.d,payload:e}}function c(e){return{type:p.e,payload:e}}function u(e){return{type:p.f,payload:e}}function s(e){return{type:p.g,payload:e}}var p=t("./app/containers/DevicePage/constants.js");n.a=r,n.e=a,n.f=i,n.g=o,n.b=c,n.c=u,n.d=s},"./app/containers/DevicePage/constants.js":function(e,n,t){"use strict";t.d(n,"a",function(){return r}),t.d(n,"b",function(){return a}),t.d(n,"c",function(){return i}),t.d(n,"d",function(){return o}),t.d(n,"e",function(){return c}),t.d(n,"f",function(){return u}),t.d(n,"g",function(){return s});var r="app/DevicePage/LOAD_PAGE",a="app/DevicePage/SET_PAGE_ID",i="app/DevicePage/SET_PAGE_SETTINGS",o="app/DevicePage/SET_DEVICES",c="app/DevicePage/SET_FILTER_CATEGORY",u="app/DevicePage/SET_DEVICE_EDITING",s="app/DevicePage/SET_DEVICE_DELETING"},"./app/containers/DevicePage/sagas.js":function(e,n,t){"use strict";function r(e){var n,r,a,o,m,v;return regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,t.i(i.select)(t.i(s.g)());case 2:return n=d.sent,d.next=5,t.i(i.select)(t.i(p.b)());case 5:if(r=d.sent,a=e.payload,a==n){d.next=35;break}return d.next=10,t.i(i.put)(t.i(f.e)(a));case 10:return d.prev=10,o=g.serverHost+"/api/device/list",d.next=14,t.i(i.call)(c.a,o,{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({farmId:r})});case 14:if(m=d.sent,!m.data){d.next=27;break}return v=t.i(l.a)(m.data)[a],d.next=19,t.i(i.put)(t.i(f.e)(a));case 19:return d.next=21,t.i(i.put)(t.i(f.f)(v.settings));case 21:return d.next=23,t.i(i.put)(t.i(f.g)(v.devices));case 23:return d.next=25,t.i(i.call)(u.toast.success,"设备信息加载成功");case 25:d.next=29;break;case 27:return d.next=29,t.i(i.call)(u.toast.error,"设备信息加载失败, 请稍后刷新页面重试");case 29:d.next=35;break;case 31:return d.prev=31,d.t0=d.catch(10),d.next=35,t.i(i.call)(u.toast.error,"设备信息加载失败, 请稍后刷新页面重试...");case 35:case"end":return d.stop()}},d[0],this,[[10,31]])}function a(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.i(i.takeEvery)(o.a,r);case 2:case"end":return e.stop()}},d[1],this)}Object.defineProperty(n,"__esModule",{value:!0});var i=t("./node_modules/redux-saga/effects.js"),o=(t.n(i),t("./app/containers/DevicePage/constants.js")),c=t("./app/utils/request.js"),u=t("./node_modules/react-toastify/lib/index.js"),s=(t.n(u),t("./app/containers/DevicePage/selectors.js")),p=t("./app/containers/FarmPage/selectors.js"),f=t("./app/containers/DevicePage/actions.js"),g=t("./config/index.js"),l=(t.n(g),t("./app/containers/DevicePage/util/api-transform.js"));n.loadPage=r,n.loadPageSaga=a;var d=[r,a].map(regeneratorRuntime.mark);n.default=[a]},"./app/containers/DevicePage/selectors.js":function(e,n,t){"use strict";var r=t("./node_modules/reselect/es/index.js");t.d(n,"g",function(){return i}),t.d(n,"b",function(){return o}),t.d(n,"a",function(){return c}),t.d(n,"c",function(){return u}),t.d(n,"d",function(){return s}),t.d(n,"e",function(){return p}),t.d(n,"f",function(){return f});var a=function(){return function(e){return e.get("devicePage")}},i=function(){return t.i(r.a)(a(),function(e){return e.get("pageId")})},o=function(){return t.i(r.a)(a(),function(e){return e.get("pageSettings").toJS()})},c=function(){return t.i(r.a)(a(),function(e){var n=e.get("filterCategory");return e.get("devices").filter(function(e){return"列表模式"===n||e.get("category")===n}).toJS()})},u=function(){return t.i(r.a)(a(),function(e){return e.get("filterCategory")})},s=function(){return t.i(r.a)(a(),function(e){return e.get("deviceIsEditing")})},p=function(){return t.i(r.a)(a(),function(e){return e.get("deviceEditing").toJS()})},f=function(){return t.i(r.a)(a(),function(e){return e.get("deviceDeleteing").toJS()})}},"./app/containers/DevicePage/util/api-transform.js":function(e,n,t){"use strict";function r(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}t.d(n,"a",function(){return f});var a={"网关设备":"智能控制","土壤湿度传感器":"智能传感","土壤温度传感器":"智能传感","土壤PH传感器":"智能传感","土壤EC传感器":"智能传感","空气湿度传感器":"智能传感","光照传感器":"智能传感","空气CO2传感器":"智能传感","双态开关控制器":"智能控制","双态脉冲控制器":"智能控制","三态开关控制器":"智能控制","大电流设备控制器":"智能控制","智能传感":"智能传感","智能控制":"智能控制","监控云台":"监控云台","水肥一体机":"设备工况","土壤墒情站":"设备工况","辅助设备":"设备工况","气象站":"设备工况","虫情监控":"设备工况","设备工况":"设备工况"},i={"网关设备":"18","土壤湿度传感器":"17","土壤温度传感器":"48","土壤PH传感器":"51","土壤EC传感器":"50","空气湿度传感器":"46","光照传感器":"73","空气CO2传感器":"69","双态开关控制器":"71","双态脉冲控制器":"66","三态开关控制器":"67","大电流设备控制器":"65","智能传感":"8","智能控制":"6","监控云台":"13","水肥一体机":"17","土壤墒情站":"5","辅助设备":"72","气象站":"15","虫情监控":"49","列表模式":"68","设备工况":"75"},o={"智能传感":"30","智能控制":"34","监控云台":"38","设备工况":"34"},c={"网关设备":"#F2A523","土壤湿度传感器":"#F2A523","土壤温度传感器":"#F2A523","土壤PH传感器":"#F2A523","土壤EC传感器":"#F2A523","空气湿度传感器":"#F2A523","光照传感器":"#F2A523","空气CO2传感器":"#F2A523","双态开关控制器":"#27D580","双态脉冲控制器":"#27D580","三态开关控制器":"#27D580","大电流设备控制器":"#27D580","智能传感":"#F2A523","智能控制":"#27D580","监控云台":"#0D3F7B","水肥一体机":"#0D3F7B","土壤墒情站":"#0D3F7B","辅助设备":"#0D3F7B","气象站":"#0D3F7B","虫情监控":"#0D3F7B","列表模式":"#0D3F7B","设备工况":"#0D3F7B"},u={1:{serverType:"GATEWAY",typeName:"网关设备"},16:{serverType:"MONITOR",typeName:"空气湿度传感器"},17:{serverType:"MONITOR",typeName:"光照强度传感器"},19:{serverType:"MONITOR",typeName:"空气CO2浓度传感器"},21:{serverType:"MONITOR",typeName:"土壤温度传感器"},22:{serverType:"MONITOR",typeName:"土壤湿度传感器"},128:{serverType:"CONTROL",typeName:"双态脉冲控制器"},129:{serverType:"CONTROL",typeName:"双态开关控制器"},130:{serverType:"CONTROL",typeName:"双态开关控制器"},132:{serverType:"CONTROL",typeName:"双态脉冲控制器"},133:{serverType:"CONTROL",typeName:"双态开关控制器"},134:{serverType:"CONTROL",typeName:"双态开关控制器"},135:{serverType:"CONTROL",typeName:"大电流设备控制器"}},s={GATEWAY:{name:"gateway",page:0},MONITOR:{name:"sensor",page:1},CONTROL:{name:"controller",page:2}},p={0:{settings:{pageTitle:"网关设备",pageIcon:i["网关设备"],deviceType:"gateway",categories:[]},devices:[]},1:{settings:{pageTitle:"智能传感",pageIcon:i["智能传感"],deviceType:"sensor",categories:[{name:"土壤湿度传感器",iconName:i["土壤湿度传感器"],iconColor:"#F2A523"},{name:"土壤温度传感器",iconName:i["土壤温度传感器"],iconColor:"#F2A523"},{name:"土壤PH传感器",iconName:i["土壤PH传感器"],iconColor:"#F2A523"},{name:"土壤EC传感器",iconName:i["土壤EC传感器"],iconColor:"#F2A523"},{name:"空气湿度传感器",iconName:i["空气湿度传感器"],iconColor:"#F2A523"},{name:"光照传感器",iconName:i["光照传感器"],iconColor:"#F2A523"},{name:"空气CO2传感器",iconName:i["空气CO2传感器"],iconColor:"#F2A523"},{name:"列表模式",iconName:i["列表模式"],iconColor:"#F2A523"}]},devices:[]},2:{settings:{pageTitle:"智能控制",pageIcon:i["智能控制"],deviceType:"controller",categories:[{name:"双态开关控制器",iconName:i["双态开关控制器"],iconColor:"#27D580"},{name:"双态脉冲控制器",iconName:i["双态脉冲控制器"],iconColor:"#27D580"},{name:"三态开关控制器",iconName:i["三态开关控制器"],iconColor:"#27D580"},{name:"大电流设备控制器",iconName:i["大电流设备控制器"],iconColor:"#27D580"},{name:"列表模式",iconName:i["列表模式"],iconColor:"#27D580"}]},devices:[]},3:{settings:{pageTitle:"设备工况",pageIcon:i["设备工况"],deviceType:"monitor",categories:[{name:"智能传感",iconName:i["智能传感"],iconColor:"#F2A523"},{name:"智能控制",iconName:i["智能控制"],iconColor:"#27D580"},{name:"监控云台",iconName:i["监控云台"],iconColor:"#0D3F7B"},{name:"水肥一体机",iconName:i["水肥一体机"],iconColor:"#0D3F7B"},{name:"土壤墒情站",iconName:i["土壤墒情站"],iconColor:"#0D3F7B"},{name:"辅助设备",iconName:i["辅助设备"],iconColor:"#0D3F7B"},{name:"气象站",iconName:i["气象站"],iconColor:"#0D3F7B"},{name:"虫情监控",iconName:i["虫情监控"],iconColor:"#0D3F7B"},{name:"列表模式",iconName:i["列表模式"],iconColor:"#0D3F7B"}]},devices:[]}},f=function(e){var n=Object.assign({},p);return e.forEach(function(e){var t=e.type,p=u[t].typeName,f=u[t].serverType,g=s[f].page;n[g].devices.push({iconName:i[p],batteryPercent:e.battery,boarderColor:c[p],category:p,catIconName:o[a[p]],deviceId:e.id,deviceName:e.name,signalLevel:e.signal,location:{lat:e.pointVO.latitude,lng:e.pointVO.longitude},deviceType:p,sensorData:"sensor"===p?e.states.map(function(e){return e.name+" "+e.value+" "+e.unit}):[],controllerData:"controller"===p?[].concat(r(Array(3).keys())).map(function(e){return{id:state.key,name:cat.substring(0,5)+" "+randomInt(0,100),allowedValue:state.allowedValue,value:state.value}}):[]})}),n}},"./app/containers/FarmPage/selectors.js":function(e,n,t){"use strict";var r=t("./node_modules/reselect/es/index.js");t.d(n,"b",function(){return i}),t.d(n,"a",function(){return o}),t.d(n,"c",function(){return c}),t.d(n,"e",function(){return u}),t.d(n,"f",function(){return s}),t.d(n,"d",function(){return p});var a=function(){return function(e){return e.get("farmPage")}},i=function(){return t.i(r.a)(a(),function(e){return e.get("activeFarmId").toString()})},o=function(){return t.i(r.a)(a(),function(e){var n=e.get("activeFarmId"),t=e.get("farms").get(n)||e.get("farms").get("NA");return t.toJS()})},c=function(){return t.i(r.a)(a(),function(e){var n=e.get("editingFarmId");return Object.values(e.get("farms").toJS()).filter(function(e){return null===n||e.id.toString()!==n})})},u=function(){return t.i(r.a)(a(),function(e){return e.get("editingFarmId")})},s=function(){return t.i(r.a)(a(),function(e){return e.get("editingFarmName")})},p=function(){return t.i(r.a)(a(),function(e){return e.get("editingFarmBoundary").toJS()})}}});